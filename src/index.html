<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
  <title>Stencil Component Starter</title>
  <link rel="stylesheet" href="/build/wowo.css">
  <script src="/build/wowo.js"></script>
</head>

<body>
  <wo-main location="客厅" is-open="false"
    image-url="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2735633715,2749454924&fm=27&gp=0.jpg">
  </wo-main>
  <wo-cell-group>
    <wo-cell label="工作模式" is-scroll>
        <wo-mode></wo-mode>
    </wo-cell>
    <wo-cell label="亮度调节">
        <wo-progress max="100" min="12" percent="false" inactive="true" active-color="linear-gradient(to right, #be99ff, #7232dd)" value="15"></wo-progress>
    </wo-cell>
    <wo-cell label="颜色选择" is-scroll="true">
        <wo-color-choose size="10px"></wo-color-choose>
    </wo-cell>
    <wo-cell label="开关">
        <wo-switch size="14px" active-color="green" inactive-color="red"></wo-switch>
    </wo-cell>
    <wo-cell label="温度">
      <wo-count value="20" line-color="red"></wo-count>
    </wo-cell>
    <wo-cell label="选择器">
      <span id="show" class="select">未选择</span>
    </wo-cell>
    <wo-cell label="按钮展示" bottom-line="false">
      <wo-button type="info" size="small" plain>草长莺飞二月天</wo-button>
    </wo-cell>
    
    <wo-action-sheet show="false"></wo-action-sheet>
  </wo-cell-group>

  <script>
    // 设置属性值
    function setProps(props, cmp) {
      if (!props) return;
      Object.keys(props).map(key => cmp[key] = props[key])
    }

    // 固定主视区
    let mainEle = document.querySelector('wo-main');
    mainEle.addEventListener('change', e => {
      console.log(e.detail)
    })

    // 模式选择
    let modeEle = document.querySelector('wo-mode');
    setProps({
      lists: [{
        name: '环保',
        selected: true
      }, {
        name: '节能',
        selected: false
      }, {
        name: '节能',
        selected: false
      }, {
        name: '节能',
        selected: false
      }, {
        name: '动力',
        selected: false
      }, {
        name: '静音',
        selected: false
      }]
    }, modeEle);
    modeEle.addEventListener('change', e => {
      console.log(e.detail)
    })

    // 进度条
    let progressEle = document.querySelector('wo-progress')
    progressEle.addEventListener('change', e => {
      console.log(e.detail)
    })

    // 颜色选择
    let colorEle = document.querySelector('wo-color-choose');
    setProps({
      lists: [{
        name: '黄色',
        color: 'yellow',
        selected: true
      }, {
        name: '红色',
        color: 'red',
        selected: false
      }, {
        name: '绿色',
        color: 'green',
        selected: false
      }, {
        name: '蓝色',
        color: '#09f',
        selected: false
      }]
    }, colorEle);
    colorEle.addEventListener('change', e => {
      console.log(e.detail)
    })

    // 开关
    let switchEle = document.querySelector('wo-switch');
    switchEle.addEventListener('change', e=>{
      console.log(e.detail)
    })

    // 计数器
    let countEle = document.querySelector('wo-count');
    countEle.addEventListener('change', e => {
      console.log(e.detail)
    })

    // 倒计时
    let showEle = document.querySelector('#show')
    let actionEle = document.querySelector('wo-action-sheet')
    let actions = [
          {
            name: '一小时',
            selected: true
          },
          {
            name: '二小时',
            selected: false
          }
        ]
    showEle.onclick = function(){
      setProps({
        show: true,
        lists: actions
      }, actionEle)
    }
    actionEle.addEventListener('change',e => {
      let data = e.detail
      showEle.innerText = data.current.name
      actions = e.detail.all
      console.log(data)
    })

    // 按钮
    let buttonEle = document.querySelector('wo-button')
    buttonEle.addEventListener('touched', e => {
      console.log(e.detail)
    })

    // 向父页面发送消息
    function postMessage(data) {
      window.parent.postMessage(data, 'http://localhost:8080')
    }

    // 接收信息
    window.addEventListener('message', function(e){
      let data = e.data
      console.log(data)
    })

  </script>
</body>

</html>
